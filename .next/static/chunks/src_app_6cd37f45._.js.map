{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Learning/stage/Proformation/projetformation/src/app/graphql/queries.ts"],"sourcesContent":["import { gql } from \"@apollo/client\";\r\n\r\nexport const SEARCH_CLIENTS = gql`\r\n  query SearchClients($searchTerm: String!) {\r\n    searchClients(searchTerm: $searchTerm) {\r\n      id\r\n      name\r\n      lastname\r\n      phone\r\n      entreprise\r\n    }\r\n  }\r\n`;\r\nexport const FILTER_FORMATEURS_WITH_EXP = gql`\r\n  query FilterFormateurWithExp($filterExp: filterFormateurInput!) {\r\n    FilterFormateurWithExp(filterExp: $filterExp) {\r\n      id\r\n      name\r\n      lastname\r\n      email\r\n      tarifConventionne\r\n    }\r\n  }\r\n`;\r\n\r\nexport const FILTER_FORMATEURS_WITHOUT_EXP = gql`\r\n  query FilterFormateurWithoutExp($filterWithoutExp:FilterFormateursWithoutExpInput!){\r\n  FilterFormateurWithoutExp(filterWithoutExp:$filterWithoutExp){\r\n  id\r\n  name\r\n  lastname\r\n  email\r\n  competence\r\n  tarifConventionne}\r\n  }\r\n`;\r\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,MAAM,iBAAiB,iJAAA,CAAA,MAAG,CAAC;;;;;;;;;;AAUlC,CAAC;AACM,MAAM,6BAA6B,iJAAA,CAAA,MAAG,CAAC;;;;;;;;;;AAU9C,CAAC;AAEM,MAAM,gCAAgC,iJAAA,CAAA,MAAG,CAAC;;;;;;;;;;AAUjD,CAAC","debugId":null}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///C:/Learning/stage/Proformation/projetformation/src/app/components/newRequestForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Label, RadioGroup } from \"@radix-ui/react-dropdown-menu\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { SEARCH_CLIENTS } from \"../graphql/queries\";\r\n\r\ninterface client{\r\n  id:number;\r\n  name:string;\r\n  lastname:string;\r\n  email:string;\r\n  phone:string;\r\n  entreprise:string;\r\n}\r\n\r\ntype NewFormProps = {\r\n  onSubmitRequest: (data: any) => void;\r\n};\r\n\r\nexport default function NewForm({ onSubmitRequest }: NewFormProps) {\r\n  const [localisation, setLocalisation] = useState(\"\");\r\n  const[requestNumber,setrequestNumber] = useState(\"\");\r\n  const [searchClients,{data,loading,error}]=useLazyQuery(SEARCH_CLIENTS);\r\n  const [formData, setFormData] = useState({\r\n    requestNumber: \"\",\r\n    code: \"\",\r\n    client: \"\",\r\n    intitule: \"\",\r\n    programme: null as File | null,\r\n    duration: \"\",\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    address: \"\",\r\n    clientPrice: \"\",\r\n    comment: \"\",\r\n    trainer: \"\",\r\n    clientFees: \"\",\r\n    logisticCost: \"\",\r\n    trainerRate: \"\",\r\n    status: \"\",\r\n  });\r\n  \r\n  const [searchTerm,setSearchTerm]=useState(\"\");\r\n  const [selectedClient,setSelectedClient]=useState<client|null>(null);\r\n  const [clients,setClients]=useState<client[]>([]);\r\n  const [filteredClients,setFilteredClients]=useState<client[]>(clients);\r\n  const [clientType, setClientType] = useState<\"existing\" | \"new\">(\"existing\");\r\n  const [newClientData, setNewClientData] = useState({\r\n    name: \"\",\r\n    lastname: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    entreprise: \"\",\r\n  });\r\n\r\n  const handleLocalisationChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const value = e.target.value;\r\n    setLocalisation(value);\r\n    setFormData((prev) => ({ ...prev, address: value }));\r\n  };\r\n\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n    if (name === \"client\") {\r\n      const selectedClient = codeClient.find((c) => c.value === value);\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        client: value,\r\n        clientPrice: selectedClient?.tarif ?? \"\",\r\n      }));\r\n    } else if (name === \"trainer\") {\r\n      const selectedTrainer = codeForamteur.find((f) => f.value === value);\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        trainer: value,\r\n        trainerRate: selectedTrainer?.tarif ?? \"\",\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0] || null;\r\n    setFormData((prev) => ({ ...prev, programme: file }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const clientInfo =\r\n      clientType === \"existing\" && selectedClient\r\n        ? {...formData, \r\n          client: selectedClient.id }\r\n        : {...formData, \r\n          newClient: newClientData };\r\n    onSubmitRequest(formData);\r\n    setFormData({\r\n      requestNumber,\r\n      code: \"\",\r\n      client: \"\",\r\n      intitule: \"\",\r\n      programme: null,\r\n      duration: \"\",\r\n      startDate: \"\",\r\n      endDate: \"\",\r\n      address: \"\",\r\n      clientPrice: \"\",\r\n      comment: \"\",\r\n      trainer: \"\",\r\n      clientFees: \"\",\r\n      logisticCost: \"\",\r\n      trainerRate: \"\",\r\n      status: \"\",\r\n    });\r\n    console.log(formData);\r\n  };\r\n\r\n  useEffect(()=>{\r\n    if (searchTerm.trim() === \"\")return;\r\n    const delayDebounce = setTimeout(()=>{searchClients({variables:{searchTerm}});},300);\r\n    return ()=>clearTimeout(delayDebounce);\r\n  },[searchTerm]);\r\n\r\n  useEffect(()=>{\r\n    if (data?.searchClients) {\r\n      setFilteredClients(data.searchClients);\r\n    }\r\n  },[data]);\r\n\r\n  useEffect(() => {\r\n    const generateRequestNumber = () => {\r\n      const date = new Date();\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n      const day = String(date.getDate()).padStart(2, \"0\");\r\n      const timestamp = Date.now().toString().slice(-6);\r\n      return `REQ-${year}${month}${day}-${timestamp}`;\r\n    };\r\n    setrequestNumber(generateRequestNumber());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFormData((prev) => ({ ...prev, requestNumber }));\r\n  }, [requestNumber]);\r\n\r\n  useEffect(() => {\r\n    if (searchTerm === \"\") {\r\n      setFilteredClients(clients);\r\n    } else {\r\n      const filtered = clients.filter((c) =>\r\n        c.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.lastname.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.entreprise.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n      setFilteredClients(filtered);\r\n    }\r\n  }, [searchTerm, clients]);\r\n\r\n  const [codeOptions, setCodeOptions] = useState([\r\n    { value: \"code1\", label: \"Code 1\", intitule: \"intitule pour Code 1\" },\r\n    { value: \"code2\", label: \"Code 2\", intitule: \"intitule pour Code 2\" },\r\n    { value: \"code3\", label: \"Code 3\", intitule: \"intitule pour Code 3\" },\r\n  ]);\r\n\r\n  const [codeClient, setCodeClient] = useState([\r\n    { value: \"client1\", label: \"Client 1\", tarif: \"321\" },\r\n    { value: \"client2\", label: \"Client 2\", tarif: \"456\" },\r\n    { value: \"client3\", label: \"Client 3\", tarif: \"789\" },\r\n  ]);\r\n\r\n  const [codeForamteur, setCodeForamteur] = useState([\r\n    { value: \"Formateurx\", label: \"formateur X\", tarif: \"3000\" },\r\n    { value: \"Formateury\", label: \"formateur Y\", tarif: \"4000\" },\r\n  ]);\r\n\r\n  interface Option {\r\n    value: string;\r\n    label: string;\r\n  }\r\n\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"bg-white p-6 rounded-lg w-2xl mx-auto\"\r\n    >\r\n      <div className=\"border-b border-gray-200 pb-6 sm:pb-8 \">\r\n        <label className=\"block text-sm font-medium text-gray-700 max-w-md mx-auto sm:max-w-lg lg:max-w-xl\">\r\n          Numéro Demande\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"requestNumber\"\r\n          className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50 \"\r\n          value={formData.requestNumber}\r\n          readOnly\r\n        />\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Code</label>\r\n        <select\r\n          name=\"code\"\r\n          className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n          value={formData.code}\r\n          onChange={handleInputChange}\r\n        >\r\n          <option value=\"\">Sélectionnez un code</option>\r\n          {codeOptions.map((code) => (\r\n            <option key={code.value} value={code.value}>\r\n              {code.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"mb-4\">\r\n  <label className=\"block text-sm font-medium text-gray-700\">Client</label>\r\n\r\n  <RadioGroup\r\n    value={clientType}\r\n    onValueChange={(v) => setClientType(v as \"existing\" | \"new\")}\r\n  >\r\n    <div className=\"flex gap-4 mt-2\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <input type=\"radio\" id=\"existing\" value=\"existing\" checked={clientType === \"existing\"} onChange={() => setClientType(\"existing\")} />\r\n        <label htmlFor=\"existing\">Client existant</label>\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        <input type=\"radio\" id=\"new\" value=\"new\" checked={clientType === \"new\"} onChange={() => setClientType(\"new\")} />\r\n        <label htmlFor=\"new\">Nouveau client</label>\r\n      </div>\r\n    </div>\r\n  </RadioGroup>\r\n\r\n  {clientType === \"existing\" && (\r\n    <div className=\"border p-4 mt-4 rounded-md space-y-2\">\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Rechercher un client\"\r\n        value={searchTerm}\r\n        onChange={(e) => setSearchTerm(e.target.value)}\r\n      />\r\n      <div className=\"max-h-60 overflow-y-auto space-y-2\">\r\n        {filteredClients.map((client) => (\r\n          <div\r\n            key={client.id}\r\n            className={`p-2 border rounded-md cursor-pointer ${\r\n              selectedClient?.id === client.id\r\n                ? \"bg-blue-100 border-blue-500\"\r\n                : \"\"\r\n            }`}\r\n            onClick={() => setSelectedClient(client)}\r\n          >\r\n            <div className=\"font-medium\">\r\n              {client.name} {client.lastname}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600\">\r\n              {client.email} - {client.phone}\r\n            </div>\r\n            {client.entreprise && (\r\n              <span className=\"text-xs bg-gray-200 px-2 py-1 rounded\">\r\n                {client.entreprise}\r\n              </span>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\n  {clientType === \"new\" && (\r\n    <div className=\"border p-4 mt-4 rounded-md space-y-4\">\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Nom\"\r\n        value={newClientData.name}\r\n        onChange={(e) =>\r\n          setNewClientData({ ...newClientData, name: e.target.value })\r\n        }\r\n        required\r\n      />\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Prénom\"\r\n        value={newClientData.lastname}\r\n        onChange={(e) =>\r\n          setNewClientData({ ...newClientData, lastname: e.target.value })\r\n        }\r\n        required\r\n      />\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Email\"\r\n        type=\"email\"\r\n        value={newClientData.email}\r\n        onChange={(e) =>\r\n          setNewClientData({ ...newClientData, email: e.target.value })\r\n        }\r\n        required\r\n      />\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Téléphone\"\r\n        value={newClientData.phone}\r\n        onChange={(e) =>\r\n          setNewClientData({ ...newClientData, phone: e.target.value })\r\n        }\r\n      />\r\n      <input\r\n        className=\"w-full border rounded-md p-2\"\r\n        placeholder=\"Entreprise\"\r\n        value={newClientData.entreprise}\r\n        onChange={(e) =>\r\n          setNewClientData({ ...newClientData, entreprise: e.target.value })\r\n        }\r\n      />\r\n    </div>\r\n  )}\r\n</div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">\r\n          intitule\r\n        </label>\r\n        <input\r\n          name=\"intitule\"\r\n          className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n          value={formData.intitule}\r\n          onChange={handleInputChange}\r\n          readOnly\r\n        ></input>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Programme\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"programme\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            onChange={handleFileChange}\r\n          ></input>\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Durée(jours)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"duration\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.duration ?? \"\"}\r\n            onChange={handleInputChange}\r\n            min={1}\r\n            placeholder=\"1\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Date Début\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            name=\"startDate\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.startDate}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Date Fin\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            name=\"endDate\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.endDate}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Lieu\r\n          </label>\r\n          <select\r\n            name=\"address\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.address}\r\n            onChange={handleLocalisationChange}\r\n          >\r\n            <option value=\"\">Selectionner un lieu</option>\r\n            <option value=\"Présentiel\">Présentiel</option>\r\n            <option value=\"Classe Virtuelle\">Classe Virtuelle (CV)</option>\r\n          </select>\r\n        </div>\r\n        {localisation === \"Présentiel\" && (\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700\">\r\n              Adresse\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"address\"\r\n              className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n              value={formData.address}\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Tarif\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"clientPrice\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.clientPrice}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Commentaire\r\n          </label>\r\n          <textarea\r\n            name=\"comment\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            rows={2}\r\n            placeholder=\"commentez ici!\"\r\n            value={formData.comment}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Foramteur\r\n          </label>\r\n          <select\r\n            name=\"trainer\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.trainer}\r\n            onChange={handleInputChange}\r\n          >\r\n            <option value=\"\">Sélectionnez un formateur</option>\r\n            {codeForamteur.map((trainer) => (\r\n              <option key={trainer.value} value={trainer.value}>\r\n                {trainer.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Frais\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"clientFees\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.clientFees}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Coût Logistique\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"logisticCost\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.logisticCost}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Tarif formateur\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"trainerRate\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.trainerRate}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Etat\r\n          </label>\r\n          <select\r\n            name=\"status\"\r\n            className=\"block mt-1 w-full border-gray-300 rounded-md shadow-sm p-2 bg-gray-50\"\r\n            value={formData.status}\r\n            onChange={handleInputChange}\r\n          >\r\n            <option value=\"\">Sélectionnez un état</option>\r\n            <option value=\"En cours\">En cours</option>\r\n            <option value=\"Traitée\">Traitée</option>\r\n            <option value=\"Sourcing\">Sourcing</option>\r\n            <option value=\"Confirmée\">Confirmée</option>\r\n            <option value=\"Expirée\">Expirée</option>\r\n            <option value=\"Annulation client\">Annulation client</option>\r\n            <option value=\"Annulation formateur\">Annulation formateur</option>\r\n            <option value=\"Terminée\">Terminée</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Soumettre\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAoBe,SAAS,QAAQ,EAAE,eAAe,EAAgB;;IAC/D,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAK,CAAC,eAAc,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,eAAc,EAAC,IAAI,EAAC,OAAO,EAAC,KAAK,EAAC,CAAC,GAAC,CAAA,GAAA,uKAAA,CAAA,eAAY,AAAD,EAAE,mIAAA,CAAA,iBAAc;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,eAAe;QACf,MAAM;QACN,QAAQ;QACR,UAAU;QACV,WAAW;QACX,UAAU;QACV,WAAW;QACX,SAAS;QACT,SAAS;QACT,aAAa;QACb,SAAS;QACT,SAAS;QACT,YAAY;QACZ,cAAc;QACd,aAAa;QACb,QAAQ;IACV;IAEA,MAAM,CAAC,YAAW,cAAc,GAAC,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC1C,MAAM,CAAC,gBAAe,kBAAkB,GAAC,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC/D,MAAM,CAAC,SAAQ,WAAW,GAAC,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAChD,MAAM,CAAC,iBAAgB,mBAAmB,GAAC,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY;IAC9D,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAsB;IACjE,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACjD,MAAM;QACN,UAAU;QACV,OAAO;QACP,OAAO;QACP,YAAY;IACd;IAEA,MAAM,2BAA2B,CAAC;QAChC,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,gBAAgB;QAChB,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;YAAM,CAAC;IACpD;IAEA,MAAM,oBAAoB,CACxB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;QACjD,IAAI,SAAS,UAAU;YACrB,MAAM,iBAAiB,WAAW,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;YAC1D,YAAY,CAAC,OAAS,CAAC;oBACrB,GAAG,IAAI;oBACP,QAAQ;oBACR,aAAa,gBAAgB,SAAS;gBACxC,CAAC;QACH,OAAO,IAAI,SAAS,WAAW;YAC7B,MAAM,kBAAkB,cAAc,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;YAC9D,YAAY,CAAC,OAAS,CAAC;oBACrB,GAAG,IAAI;oBACP,SAAS;oBACT,aAAa,iBAAiB,SAAS;gBACzC,CAAC;QACH;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;QACpC,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,WAAW;YAAK,CAAC;IACrD;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,MAAM,aACJ,eAAe,cAAc,iBACzB;YAAC,GAAG,QAAQ;YACZ,QAAQ,eAAe,EAAE;QAAC,IAC1B;YAAC,GAAG,QAAQ;YACZ,WAAW;QAAc;QAC/B,gBAAgB;QAChB,YAAY;YACV;YACA,MAAM;YACN,QAAQ;YACR,UAAU;YACV,WAAW;YACX,UAAU;YACV,WAAW;YACX,SAAS;YACT,SAAS;YACT,aAAa;YACb,SAAS;YACT,SAAS;YACT,YAAY;YACZ,cAAc;YACd,aAAa;YACb,QAAQ;QACV;QACA,QAAQ,GAAG,CAAC;IACd;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,IAAI,WAAW,IAAI,OAAO,IAAG;YAC7B,MAAM,gBAAgB;mDAAW;oBAAK,cAAc;wBAAC,WAAU;4BAAC;wBAAU;oBAAC;gBAAG;kDAAE;YAChF;qCAAO,IAAI,aAAa;;QAC1B;4BAAE;QAAC;KAAW;IAEd,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,IAAI,MAAM,eAAe;gBACvB,mBAAmB,KAAK,aAAa;YACvC;QACF;4BAAE;QAAC;KAAK;IAER,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM;2DAAwB;oBAC5B,MAAM,OAAO,IAAI;oBACjB,MAAM,OAAO,KAAK,WAAW;oBAC7B,MAAM,QAAQ,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;oBACtD,MAAM,MAAM,OAAO,KAAK,OAAO,IAAI,QAAQ,CAAC,GAAG;oBAC/C,MAAM,YAAY,KAAK,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC;oBAC/C,OAAO,CAAC,IAAI,EAAE,OAAO,QAAQ,IAAI,CAAC,EAAE,WAAW;gBACjD;;YACA,iBAAiB;QACnB;4BAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR;qCAAY,CAAC,OAAS,CAAC;wBAAE,GAAG,IAAI;wBAAE;oBAAc,CAAC;;QACnD;4BAAG;QAAC;KAAc;IAElB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,IAAI,eAAe,IAAI;gBACrB,mBAAmB;YACrB,OAAO;gBACL,MAAM,WAAW,QAAQ,MAAM;kDAAC,CAAC,IAC/B,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACpD,EAAE,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACxD,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACrD,EAAE,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;;gBAE5D,mBAAmB;YACrB;QACF;4BAAG;QAAC;QAAY;KAAQ;IAExB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAC7C;YAAE,OAAO;YAAS,OAAO;YAAU,UAAU;QAAuB;QACpE;YAAE,OAAO;YAAS,OAAO;YAAU,UAAU;QAAuB;QACpE;YAAE,OAAO;YAAS,OAAO;YAAU,UAAU;QAAuB;KACrE;IAED,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAC3C;YAAE,OAAO;YAAW,OAAO;YAAY,OAAO;QAAM;QACpD;YAAE,OAAO;YAAW,OAAO;YAAY,OAAO;QAAM;QACpD;YAAE,OAAO;YAAW,OAAO;YAAY,OAAO;QAAM;KACrD;IAED,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACjD;YAAE,OAAO;YAAc,OAAO;YAAe,OAAO;QAAO;QAC3D;YAAE,OAAO;YAAc,OAAO;YAAe,OAAO;QAAO;KAC5D;IAQD,qBACE,6LAAC;QACC,UAAU;QACV,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAM,WAAU;kCAAmF;;;;;;kCAGpG,6LAAC;wBACC,MAAK;wBACL,MAAK;wBACL,WAAU;wBACV,OAAO,SAAS,aAAa;wBAC7B,QAAQ;;;;;;;;;;;;0BAGZ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAM,WAAU;kCAA0C;;;;;;kCAC3D,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO,SAAS,IAAI;wBACpB,UAAU;;0CAEV,6LAAC;gCAAO,OAAM;0CAAG;;;;;;4BAChB,YAAY,GAAG,CAAC,CAAC,qBAChB,6LAAC;oCAAwB,OAAO,KAAK,KAAK;8CACvC,KAAK,KAAK;mCADA,KAAK,KAAK;;;;;;;;;;;;;;;;;0BAM7B,6LAAC;gBAAI,WAAU;;kCACnB,6LAAC;wBAAM,WAAU;kCAA0C;;;;;;kCAE3D,6LAAC,+KAAA,CAAA,aAAU;wBACT,OAAO;wBACP,eAAe,CAAC,IAAM,cAAc;kCAEpC,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAM,MAAK;4CAAQ,IAAG;4CAAW,OAAM;4CAAW,SAAS,eAAe;4CAAY,UAAU,IAAM,cAAc;;;;;;sDACrH,6LAAC;4CAAM,SAAQ;sDAAW;;;;;;;;;;;;8CAE5B,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAM,MAAK;4CAAQ,IAAG;4CAAM,OAAM;4CAAM,SAAS,eAAe;4CAAO,UAAU,IAAM,cAAc;;;;;;sDACtG,6LAAC;4CAAM,SAAQ;sDAAM;;;;;;;;;;;;;;;;;;;;;;;oBAK1B,eAAe,4BACd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;0CAE/C,6LAAC;gCAAI,WAAU;0CACZ,gBAAgB,GAAG,CAAC,CAAC,uBACpB,6LAAC;wCAEC,WAAW,CAAC,qCAAqC,EAC/C,gBAAgB,OAAO,OAAO,EAAE,GAC5B,gCACA,IACJ;wCACF,SAAS,IAAM,kBAAkB;;0DAEjC,6LAAC;gDAAI,WAAU;;oDACZ,OAAO,IAAI;oDAAC;oDAAE,OAAO,QAAQ;;;;;;;0DAEhC,6LAAC;gDAAI,WAAU;;oDACZ,OAAO,KAAK;oDAAC;oDAAI,OAAO,KAAK;;;;;;;4CAE/B,OAAO,UAAU,kBAChB,6LAAC;gDAAK,WAAU;0DACb,OAAO,UAAU;;;;;;;uCAhBjB,OAAO,EAAE;;;;;;;;;;;;;;;;oBAyBvB,eAAe,uBACd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO,cAAc,IAAI;gCACzB,UAAU,CAAC,IACT,iBAAiB;wCAAE,GAAG,aAAa;wCAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAE5D,QAAQ;;;;;;0CAEV,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO,cAAc,QAAQ;gCAC7B,UAAU,CAAC,IACT,iBAAiB;wCAAE,GAAG,aAAa;wCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAEhE,QAAQ;;;;;;0CAEV,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,MAAK;gCACL,OAAO,cAAc,KAAK;gCAC1B,UAAU,CAAC,IACT,iBAAiB;wCAAE,GAAG,aAAa;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAE7D,QAAQ;;;;;;0CAEV,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO,cAAc,KAAK;gCAC1B,UAAU,CAAC,IACT,iBAAiB;wCAAE,GAAG,aAAa;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;0CAG/D,6LAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO,cAAc,UAAU;gCAC/B,UAAU,CAAC,IACT,iBAAiB;wCAAE,GAAG,aAAa;wCAAE,YAAY,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;;;;;;;;;;;;;0BAOpE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAM,WAAU;kCAA0C;;;;;;kCAG3D,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO,SAAS,QAAQ;wBACxB,UAAU;wBACV,QAAQ;;;;;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,QAAQ,IAAI;gCAC5B,UAAU;gCACV,KAAK;gCACL,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,SAAS;gCACzB,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,OAAO;gCACvB,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,OAAO;gCACvB,UAAU;;kDAEV,6LAAC;wCAAO,OAAM;kDAAG;;;;;;kDACjB,6LAAC;wCAAO,OAAM;kDAAa;;;;;;kDAC3B,6LAAC;wCAAO,OAAM;kDAAmB;;;;;;;;;;;;;;;;;;oBAGpC,iBAAiB,8BAChB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,OAAO;gCACvB,UAAU;;;;;;;;;;;;kCAIhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,WAAW;gCAC3B,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,MAAM;gCACN,aAAY;gCACZ,OAAO,SAAS,OAAO;gCACvB,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,OAAO;gCACvB,UAAU;;kDAEV,6LAAC;wCAAO,OAAM;kDAAG;;;;;;oCAChB,cAAc,GAAG,CAAC,CAAC,wBAClB,6LAAC;4CAA2B,OAAO,QAAQ,KAAK;sDAC7C,QAAQ,KAAK;2CADH,QAAQ,KAAK;;;;;;;;;;;;;;;;;kCAMhC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,UAAU;gCAC1B,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,YAAY;gCAC5B,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,WAAW;gCAC3B,UAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA0C;;;;;;0CAG3D,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,MAAM;gCACtB,UAAU;;kDAEV,6LAAC;wCAAO,OAAM;kDAAG;;;;;;kDACjB,6LAAC;wCAAO,OAAM;kDAAW;;;;;;kDACzB,6LAAC;wCAAO,OAAM;kDAAU;;;;;;kDACxB,6LAAC;wCAAO,OAAM;kDAAW;;;;;;kDACzB,6LAAC;wCAAO,OAAM;kDAAY;;;;;;kDAC1B,6LAAC;wCAAO,OAAM;kDAAU;;;;;;kDACxB,6LAAC;wCAAO,OAAM;kDAAoB;;;;;;kDAClC,6LAAC;wCAAO,OAAM;kDAAuB;;;;;;kDACrC,6LAAC;wCAAO,OAAM;kDAAW;;;;;;;;;;;;;;;;;;kCAG7B,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAvfwB;;QAGqB,uKAAA,CAAA,eAAY;;;KAHjC","debugId":null}},
    {"offset": {"line": 1151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Learning/stage/Proformation/projetformation/src/app/apps/nouvelledemande/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport NewForm from \"@/app/components/newRequestForm\";\r\nimport SubmittedRequestsTable from \"@/app/apps/tableDemande/page\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {gql,useMutation} from \"@apollo/client\";\r\nimport client from \"../../../../lib/apollo-client\";\r\n\r\nconst CREATE_TRAINING_REQUEST = gql `\r\nmutation CreateTrainingRequest($input: CreateTrainingRequestInput!) {\r\n  createTrainingRequest(createTrainingRequestInput: $input) {\r\n    requestNumber\r\n    code\r\n    intitule\r\n    client {\r\n      id\r\n      name\r\n    }\r\n  }\r\n}\r\n`;\r\n\r\nconst GET_CLIENT =gql`\r\nquery GetClients{\r\nclients {id\r\nname\r\nlastname\r\nemail\r\nphone\r\nentreprise}\r\n}`\r\n\r\nexport default function NewRequestPage() {\r\n  const router =useRouter();\r\n  const [createTrainingRequest]=useMutation(CREATE_TRAINING_REQUEST);\r\n  const handleFormSubmit = async(FormData:any) => {\r\n    try{\r\n      const response = await createTrainingRequest({\r\n        variables:{\r\n          input:{\r\n            ...FormData,\r\n            code:FormData.code,\r\n            client:parseInt(FormData.client),\r\n            intitule:FormData.intitule,\r\n            programme:FormData.programme? FormData.programme.name : null,\r\n            duration:parseInt(FormData.duration),\r\n            startDate:FormData.startDate,\r\n            endDate:FormData.endDate,\r\n            address:FormData.address,\r\n            clientPrice:parseFloat(FormData.clientPrice),\r\n            comment:FormData.comment,\r\n            trainer:FormData.trainer,\r\n            clientFees:parseFloat(FormData.clientFees),\r\n            logisticCost:parseFloat(FormData.logisticCost),\r\n            trainerRate:parseFloat(FormData.trainerRate),\r\n            status:FormData.status,\r\n          },\r\n        },\r\n      });\r\n      console.log(\"Mrigel\",response.data.createTrainingRequest)\r\n      router.push(\"/apps/tableDemande\");}\r\n      catch(error){console.error('fama mochkla',error)}\r\n  }\r\n\r\n  return (\r\n    <div className=\" font-sans h-full\">\r\n      <div className=\"container mx-auto p-6 \">\r\n        <h1 className=\"text-3xl font-bold text-center\">\r\n          Formulaire de Demande de Formation\r\n        </h1>\r\n        <NewForm onSubmitRequest={handleFormSubmit}/>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAGA;AACA;AAAA;;;AANA;;;;AASA,MAAM,0BAA0B,iJAAA,CAAA,MAAG,AAAC,CAAC;;;;;;;;;;;;AAYrC,CAAC;AAED,MAAM,aAAY,iJAAA,CAAA,MAAG,CAAC;;;;;;;;CAQrB,CAAC;AAEa,SAAS;;IACtB,MAAM,SAAQ,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACtB,MAAM,CAAC,sBAAsB,GAAC,CAAA,GAAA,sKAAA,CAAA,cAAW,AAAD,EAAE;IAC1C,MAAM,mBAAmB,OAAM;QAC7B,IAAG;YACD,MAAM,WAAW,MAAM,sBAAsB;gBAC3C,WAAU;oBACR,OAAM;wBACJ,GAAG,QAAQ;wBACX,MAAK,SAAS,IAAI;wBAClB,QAAO,SAAS,SAAS,MAAM;wBAC/B,UAAS,SAAS,QAAQ;wBAC1B,WAAU,SAAS,SAAS,GAAE,SAAS,SAAS,CAAC,IAAI,GAAG;wBACxD,UAAS,SAAS,SAAS,QAAQ;wBACnC,WAAU,SAAS,SAAS;wBAC5B,SAAQ,SAAS,OAAO;wBACxB,SAAQ,SAAS,OAAO;wBACxB,aAAY,WAAW,SAAS,WAAW;wBAC3C,SAAQ,SAAS,OAAO;wBACxB,SAAQ,SAAS,OAAO;wBACxB,YAAW,WAAW,SAAS,UAAU;wBACzC,cAAa,WAAW,SAAS,YAAY;wBAC7C,aAAY,WAAW,SAAS,WAAW;wBAC3C,QAAO,SAAS,MAAM;oBACxB;gBACF;YACF;YACA,QAAQ,GAAG,CAAC,UAAS,SAAS,IAAI,CAAC,qBAAqB;YACxD,OAAO,IAAI,CAAC;QAAsB,EAClC,OAAM,OAAM;YAAC,QAAQ,KAAK,CAAC,gBAAe;QAAM;IACpD;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAiC;;;;;;8BAG/C,6LAAC,8IAAA,CAAA,UAAO;oBAAC,iBAAiB;;;;;;;;;;;;;;;;;AAIlC;GA1CwB;;QACR,qIAAA,CAAA,YAAS;QACO,sKAAA,CAAA,cAAW;;;KAFnB","debugId":null}}]
}