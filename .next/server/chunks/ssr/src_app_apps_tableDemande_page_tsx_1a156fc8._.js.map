{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Learning/stage/Proformation/projetformation/src/app/apps/tableDemande/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { gql,useQuery } from \"@apollo/client\";\r\n\r\ninterface Client{\r\n  id:number;\r\n  name:string;\r\n};\r\n\r\ninterface TrainingRequest{\r\n  requestNumber:string;\r\n  code:string;\r\n  intitule:string;\r\n  startDate:string;\r\n  endDate:string;\r\n  client:Client;\r\n  clientFees:number;\r\n  status:string;\r\n}\r\n\r\ninterface GetTrainingRequestSResponse{\r\n  trainingRequests:TrainingRequest[];\r\n}\r\n\r\nexport default function SubmittedRequestsTable() {\r\n\r\n  const GET_TRAINING_REQUESTS = gql `\r\n  query{\r\n  trainingRequests{\r\n  requestNumber\r\n  code\r\n  intitule\r\n  startDate\r\n  endDate\r\n  clientPrice\r\n  status\r\n  client{\r\n  id \r\n  name}}\r\n  }\r\n  `;\r\n\r\n  const {data,loading,error} = useQuery<GetTrainingRequestSResponse>(GET_TRAINING_REQUESTS)\r\n\r\n  if (loading) return<p className=\"text-blue-600 text-center text-6xl mt-60\">Loading...</p>\r\n  if (error) return <p className=\"text-red-600 text-center text-6xl mt-60\">Error:{error.message}</p>\r\n\r\n  const headerT = [\r\n    \"ID-Demande\",\r\n    \"Client\",\r\n    \"Foramtion\",\r\n    \"Dates\",\r\n    \"Prix de vente\",\r\n    \"Statut\",\r\n  ];\r\n  \r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"En cours\":\r\n        return \"bg-yellow-500 text-black\";\r\n      case \"Traité\":\r\n        return \"bg-green-500\";\r\n      case \"Sourcing\":\r\n        return \"bg-blue-500\";\r\n      case \"Confirmée\":\r\n        return \"bg-green-200\";\r\n      case \"Expiré\":    \r\n        return \"bg-white\";\r\n      case \"Annulation client\":\r\n        return \"bg-red-500\";\r\n    case \"Annulation formateur\":\r\n        return \"bg-red-500\";\r\n    }\r\n  };\r\n   const formatDate = (start: Date | string, end: Date | string) => {\r\n    const startDate = typeof start === \"string\" ? new Date(start) : start;\r\n    const endDate = typeof end === \"string\" ? new Date(end) : end;\r\n    return `${startDate.toLocaleDateString()} → ${endDate.toLocaleDateString()}`;\r\n  };\r\n  return (\r\n    <div>\r\n      <h2 className=\"mt-5 mx-3 mb-2 text-2xl text-black font-bold\">\r\n        Demande Soumises\r\n      </h2> \r\n      {/*Desktop view*/}\r\n      <div className=\"hidden md:block \">\r\n        <table className=\"min-w-full border-spacing-0 rounded-lg overflow-hidden \">\r\n          <thead className=\"bg-gray-200 text-black text-left\">\r\n            <tr>\r\n              {headerT.map((headerT) => (\r\n                <th key={headerT} className=\"border px-4 py-2\">\r\n                  {headerT}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\" text-black divide-y divide-gray-300\">\r\n            {data?.trainingRequests.map((req, index) => {\r\n              const start =\r\n                typeof req.startDate === \"string\"\r\n                  ? new Date(req.startDate)\r\n                  : req.startDate;\r\n              const end =\r\n                typeof req.endDate === \"string\"\r\n                  ? new Date(req.endDate)\r\n                  : req.endDate;\r\n              return (\r\n                <tr className=\"bg-gray-50\" key={index}>\r\n                  <td className=\" py-4 px-2 \">{index + 1}</td>\r\n                  <td className=\" py-4 px-2 \">{req.client.name}</td>\r\n                  <td className=\" py-4 px-2 \">{req.intitule}</td>\r\n                  <td className=\"py-4 px-6\">\r\n                    {start.toLocaleDateString()} → {end.toLocaleDateString()}\r\n                  </td>\r\n\r\n                  <td className=\" py-4 px-2 \">{req.clientFees}</td>\r\n                  <td className=\" py-4 px-2 text-center  \">\r\n                    <span\r\n                      className={`${getStatusColor(\r\n                        req.status\r\n                      )} px-3 py-1 inline-flex rounded-full text-sm`}\r\n                    >\r\n                      {req.status}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/*Mobile view*/}\r\n       <div className=\"lg:hidden space-y-4\">\r\n        {data?.trainingRequests.map((request, index) => (\r\n          <div key={index} className=\"bg-white rounded-lg shadow-md border border-gray-200 p-4\">\r\n            <div className=\"flex justify-between items-start mb-3\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">{request.intitule}</h3>\r\n                <p className=\"text-sm text-gray-600\">ID: {request.requestNumber}</p>\r\n              </div>\r\n              <span\r\n                className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}`}\r\n              >\r\n                {request.status}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm font-medium text-gray-500\">Client:</span>\r\n                <span className=\"text-sm text-gray-900\">{request.client.name}</span>\r\n              </div>\r\n\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm font-medium text-gray-500\">Dates:</span>\r\n                <span className=\"text-sm text-gray-900\">{formatDate(request.startDate, request.endDate)}</span>\r\n              </div>\r\n\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm font-medium text-gray-500\">Prix:</span>\r\n                <span className=\"text-sm font-semibold text-gray-900\">\r\n                  {request.clientFees.toLocaleString(\"fr-FR\")} €\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))} \r\n      </div>\r\n<div className=\"mt-6 text-center\">\r\n  <Link href=\"/apps/nouvelledemande\">\r\n    <button className=\"bg-gray-400 text-white px-4 py-2 rounded-md hover:bg-gray-500 transition\">\r\n      Nouvelle Demande\r\n    </button>\r\n  </Link>\r\n</div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}